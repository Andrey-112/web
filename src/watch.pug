doctype html
html(lang='en')
  head
    meta(charset='UTF-8')
    title {{{title}}}
    meta(name='viewport' content='width=device-width, initial-scale=1')
    meta(http-equiv='x-ua-compatible' content='ie=edge')
    meta(name='keywords' content='')
    meta(name='robots' content='index,follow')
    |     {{#nightMode}}
    link(rel='stylesheet' href='https://jenil.github.io/bulmaswatch/superhero/bulmaswatch.min.css')
    style.
      .pagination-link, .pagination-next, .pagination-previous {
        color: #8694a4;
      }

      .tags.has-addons .tag.is-white {
        background-color: #1a2531;
        color: #f5f5f5;
      }

      .notification.overrideVueNotificationsIssue {
        background-color: #2b3e50;
      }
    |     {{/nightMode}}
    |     {{^nightMode}}
    link(rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css')
    style.
      .videoWrapper {
        position: relative;
        padding-bottom: 51.6%;
        width: 100%;
        height: 100%;
      }    
      body, button, input, select, textarea {
        font-family: Arial
      }
      .notification.overrideVueNotificationsIssue {
        background-color: #f5f5f5;
      }
    |     {{/nightMode}}
    link(rel='shortcut icon' href='/favicon.png')
    link(rel='icon' href='/favicon.png')
    link(rel='alternate' type='application/rss+xml' title="Newly added videos" href='https://dev.tube/rss.xml')
    script(src='//cdnjs.cloudflare.com/ajax/libs/fetch/2.0.4/fetch.min.js')
    script(src='//cdnjs.cloudflare.com/ajax/libs/dayjs/1.5.24/dayjs.min.js')
    script(defer='', src='//use.fontawesome.com/releases/v5.2.0/js/all.js')
    |     {{#meta}}
    |       {{#name}}
    meta(name='{{name}}', content='{{{content}}}')
    |      {{/name}}
    |      {{^name}}
    meta(property='{{property}}', content='{{{content}}}')
    |     {{/name}}
    |   {{/meta}}
    script(type="application/ld+json").
      {{{jsonld}}}
    script.
      window.preloadedEntity = {{& preloadedEntity}}{{^preloadedEntity}}undefined{{/preloadedEntity}}
      window.serverSideError = {{& serverSideError}}{{^serverSideError}}undefined{{/serverSideError}}
      window.newVideos = {{& newVideos}}{{^newVideos}}[]{{/newVideos}}
      window.board = {{& board}}{{^board}}undefined{{/board}}
      window.speaker = {{& speaker}}{{^speaker}}undefined{{/speaker}}
      window.featured = {{& featured}}{{^featured}}undefined{{/featured}}
    include yandex.pug
  body
    #vue
      nav.navbar.is-fixed-top.is-dark(role="navigation" aria-label="main navigation")
      .watch
        section.section.body
          .container
            .columns
              .column
                .card
                  .card-image
                    .videoWrapper(style="background-image: url(//img.youtube.com/vi/{{video.id}}/hqdefault.jpg)")
                  .card-content
                        nav.level.is-mobile
                          .level-item.has-text-centered
                            div
                              p.heading
                                span
                                  font-awesome-icon(:icon="['far', 'thumbs-up']")
                              p.title.is-size-7 {{video.likes}} 
                          .level-item.has-text-centered
                            div
                              p.heading
                                span
                                  font-awesome-icon(:icon="['far', 'thumbs-down']")
                              p.title.is-size-7 {{video.dislikes}}
                          .level-item.has-text-centered
                            div
                              p.heading: font-awesome-icon(:icon="['far', 'eye']")
                              p.title.is-size-7 {{video.views}}
                          .level-item.has-text-centered
                            div
                              p.heading Duration
                              p.title.is-size-7 {{video.duration}}
                          .level-item.has-text-centered
                            div
                              p.heading Recorded
                              p.title.is-size-7 {{video.recordingDate}}
                          .level-item.has-text-centered
                            div
                              p.heading Share
                              p.title.is-size-7
                                ShareVideo(:videoId="video.objectID" :title="video.title" :channel="video.channelTitle" :tags="video.tags" :speaker="video.speaker ? video.speaker.twitter : ''")
                .content
                  h3
                  .media(v-if="video.speaker && video.speaker.twitter")
                      .media-left.has-text-left
                          figure.image.is-32x32.is-marginless
                            img.avatar(:src="'https://avatars.io/twitter/' + video.speaker.twitter")
                      .media-content
                        p.title.is-4 {{video.speaker.name}}
                        p.subtitle.is-6: a(:href="'/@' + video.speaker.twitter") @{{video.speaker.twitter}}
                  .media(v-else)
                      .media-left.has-text-left
                          figure.image.is-32x32.is-marginless
                            a(:href="'https://github.com/watch-devtube/contrib/edit/master/videos/' + video.objectID + '.yml'" target="_blank")
                              img.avatar(src="/add-speaker.png")
                  .media
                  .columns
                    .column.is-narrow
                      .tags
                        a.tag(v-for="tag in video.tags" @click="refineTag(tag)") {{tag | capitalizeIfNeeded}}
                        a.tag.is-capitalized(@click="refineChannel(video.channelTitle)")
                          i.fab.fa-youtube 
                          | &nbsp; {{video.channelTitle}}
                    .column
                      p
                        | Wrong data? 
                        a(:href="'https://github.com/watch-devtube/contrib/edit/master/videos/' + video.objectID + '.yml'" target="_blank")
                          i.fas.fa-heart
                          |  fix
                  p {{video.description}}
    //- include footer.pug